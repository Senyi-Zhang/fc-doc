<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Module2 - FC SYSTEM</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">FC SYSTEM</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href=".." class="nav-link">Outline</a>
                            </li>
                            <li class="nav-item">
                                <a href="../core_loop_code/" class="nav-link">Core Loop Code</a>
                            </li>
                            <li class="nav-item">
                                <a href="../dir1/m1/" class="nav-link">Module1</a>
                            </li>
                            <li class="nav-item">
                                <a href="./" class="nav-link active" aria-current="page">Module2</a>
                            </li>
                            <li class="nav-item">
                                <a href="../m3/" class="nav-link">Module3</a>
                            </li>
                            <li class="nav-item">
                                <a href="../m4/" class="nav-link">Module4</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../dir1/m1/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../m3/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="2"><a href="#module-2-evidence-retrieval-wikipedia-api-focused" class="nav-link">Module 2: Evidence Retrieval (Wikipedia API Focused)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h2 id="module-2-evidence-retrieval-wikipedia-api-focused">Module 2: Evidence Retrieval (Wikipedia API Focused)</h2>
<h3 id="1-goal-and-approach">1. Goal and Approach</h3>
<p>The primary function of Module 2 is to retrieve relevant textual evidence for atomic claims (provided by Module 1) by querying the live Wikipedia database. This approach leverages Wikipedia's extensive, continuously updated, and semi-structured knowledge base without requiring a local data store.</p>
<p>The core strategy relies on interacting with the official <strong>MediaWiki API</strong> for the relevant language edition of Wikipedia (e.g., <code>en.wikipedia.org</code>). Retrieval is enhanced by <strong>Large Language Models (LLMs)</strong> which assist in query formulation, entity linking, and processing the retrieved content to extract precise evidence snippets.</p>
<h3 id="2-core-strategy-tiered-retrieval-attempts">2. Core Strategy: Tiered Retrieval Attempts</h3>
<p>Evidence retrieval operates iteratively. If initial attempts fail to yield relevant evidence (as determined by Module 3: Evidence Relevance Analysis), the system escalates through a series of increasingly sophisticated attempts. State is maintained for each claim, tracking the <code>attempt_count</code>, <code>tried_wikipedia_titles</code>, and <code>tried_search_terms</code> to ensure diversity and avoid redundant searches.</p>
<p><strong>Attempt 1: Direct Entity Matching &amp; Focused Search</strong></p>
<ol>
<li>
<p><strong>Claim Analysis &amp; Query Generation (LLM-assisted):</strong></p>
<ul>
<li>The LLM analyzes the input <code>claim_text</code> to identify key entities and concepts.</li>
<li>It predicts the most likely corresponding Wikipedia article title(s) for the main entities.</li>
<li>Generates 1-2 initial queries:<ul>
<li><strong>Title Query:</strong> Directly attempts to fetch the introduction (<code>prop=extracts&amp;exintro=true&amp;explaintext=true</code>) of the highest-probability article title identified.</li>
<li><strong>Keyword Search Query:</strong> Uses core entities and keywords in a <code>list=search</code> API call to find the top M (e.g., 3-5) relevant articles.</li>
</ul>
</li>
<li>These initial targets (titles/search terms) are recorded.</li>
</ul>
</li>
<li>
<p><strong>Wikipedia API Interaction:</strong></p>
<ul>
<li>Execute the generated queries via the MediaWiki API.</li>
<li>For titles returned by <code>list=search</code>, fetch their introductory extracts.</li>
</ul>
</li>
<li>
<p><strong>Initial Snippet Extraction:</strong></p>
<ul>
<li>The retrieved introductory text often serves as a good initial snippet.</li>
<li>Optionally, an LLM refines this by extracting the 1-3 sentences most directly pertinent to the input <code>claim_text</code> from the retrieved extract.</li>
</ul>
</li>
<li>
<p><strong>Output:</strong> A list of potential evidence snippets <code>[{wikipedia_article_title, relevant_snippet, wikipedia_url}, ...]</code> is passed to Module 3.</p>
</li>
</ol>
<p><strong>Attempt 2: Broader Search &amp; Section Exploration (if Attempt 1 fails)</strong></p>
<ol>
<li>
<p><strong>Query/Strategy Refinement (LLM-assisted):</strong></p>
<ul>
<li>The LLM receives the <code>claim_text</code>, the failed queries/titles from Attempt 1, and optionally feedback from Module 3.</li>
<li><strong>LLM Task:</strong> Generate new, broader, or alternative keyword search terms for <code>list=search</code>. If a generally relevant article was identified in Attempt 1 but the introduction was insufficient, the LLM suggests specific section titles within that article (e.g., "History," "Controversies," "Technical specifications") likely to contain the needed information.</li>
<li>New search terms are recorded.</li>
</ul>
</li>
<li>
<p><strong>Wikipedia API Interaction:</strong></p>
<ul>
<li>Execute new keyword searches.</li>
<li>If exploring sections:<ul>
<li>Use the API to fetch the full article text (<code>prop=extracts&amp;explaintext=true</code>) or specific sections (e.g., via <code>action=parse&amp;prop=text&amp;section=...</code> followed by HTML-to-text conversion, or by parsing the full text).</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Enhanced Snippet Extraction (LLM-assisted):</strong></p>
<ul>
<li>Since larger text blocks (full articles or sections) might be retrieved, the LLM plays a crucial role in scanning this text and extracting only the highly relevant sentences pertaining to the <code>claim_text</code>.</li>
</ul>
</li>
<li>
<p><strong>Output:</strong> Evidence snippets passed to Module 3.</p>
</li>
</ol>
<p><strong>Attempt 3: Leveraging Wikipedia Structure (if Attempts 1 &amp; 2 fail)</strong></p>
<ol>
<li>
<p><strong>Strategy Adjustment (LLM-assisted):</strong></p>
<ul>
<li>If a partially relevant article was identified but lacked direct evidence, the LLM analyzes its structure.</li>
<li><strong>LLM Task:</strong> Based on the <code>claim_text</code> and the partially relevant article's title, identify the most promising "Categories" the article belongs to, or relevant article titles listed in its "See also" section.</li>
</ul>
</li>
<li>
<p><strong>Wikipedia API Interaction:</strong></p>
<ul>
<li>Retrieve categories for the partially relevant article (<code>prop=categories</code>).</li>
<li>Retrieve "See also" links (often requires parsing the article content).</li>
<li>Based on LLM recommendations, perform new searches within promising categories or directly retrieve content for suggested "See also" articles.</li>
</ul>
</li>
<li>
<p><strong>Snippet Extraction:</strong> As per previous attempts, using LLM assistance.</p>
</li>
<li>
<p><strong>Output:</strong> Evidence snippets passed to Module 3.</p>
</li>
</ol>
<h3 id="3-handling-wikipedia-specifics">3. Handling Wikipedia Specifics</h3>
<p>The system incorporates logic to handle common Wikipedia features:</p>
<ul>
<li><strong>Disambiguation Pages:</strong> If an API query returns a disambiguation page, the options are presented (potentially to an LLM) to select the most relevant target entity based on the original claim's context, triggering a follow-up query for the correct title.</li>
<li><strong>Redirects:</strong> The MediaWiki API typically handles redirects transparently when fetching page content by title.</li>
<li><strong>Content Volume:</strong> Priority is given to introductory sections and specific relevant sections identified by the LLM to manage potentially large article sizes and LLM context window limitations.</li>
</ul>
<h3 id="4-role-of-large-language-models-llms">4. Role of Large Language Models (LLMs)</h3>
<p>Throughout the retrieval process, LLMs act as an "intelligent assistant" to:
* <strong>Understand Claims:</strong> Parse the input claim to identify key semantic components.
* <strong>Link Entities:</strong> Map entities in the claim to potential Wikipedia article titles.
* <strong>Generate Queries:</strong> Create effective search terms and API query parameters.
* <strong>Refine Strategy:</strong> Suggest alternative search angles, broader terms, or relevant sections when initial attempts fail.
* <strong>Extract Snippets:</strong> Pinpoint and extract the most relevant sentences from potentially lengthy Wikipedia text.</p>
<h3 id="5-api-usage-considerations">5. API Usage Considerations</h3>
<ul>
<li><strong>Language:</strong> API calls are directed to the appropriate language version of Wikipedia (e.g., <code>en.wikipedia.org</code>).</li>
<li><strong>Rate Limiting &amp; Identification:</strong> Adhere to MediaWiki API usage policies, including rate limits and providing a descriptive User-Agent string in requests.</li>
<li><strong>Content Dynamism:</strong> Recognize that Wikipedia content can change; retrieved evidence reflects the state of the article at the time of the query. Logging timestamps and source URLs is essential.</li>
</ul>
<h3 id="6-failure-condition">6. Failure Condition</h3>
<p>If all tiered retrieval attempts up to the defined <code>MAX_ATTEMPTS</code> (e.g., 3 or 4) fail to produce evidence deemed relevant by Module 3, Module 2 reports a failure status for the claim (e.g., "EVIDENCE_RETRIEVAL_FAILED_WIKIPEDIA").</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
